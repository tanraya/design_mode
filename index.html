<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>A simple blog layout</title>
        <script src="js/vendor/mootools-core-1.3.js"></script>
        <script src="js/vendor/mootools-more.js"></script>

        <link rel="stylesheet" href="css/tanraya/default.css" />
        <link rel="stylesheet" href="css/layout_sample/layout.css" />
        <link rel="stylesheet" href="css/layout_sample/content.css" />

        <link rel="stylesheet" href="css/design_mode/overlay.css" />
        <link rel="stylesheet" href="css/design_mode/iframe.css" />
        <link rel="stylesheet" href="css/design_mode/dock.css" />

        <style>
            #toggle-designmode span+span { display: none; }
            #toggle-designmode.enabled span { display: none; }
            #toggle-designmode.enabled span+span { display: inline; }

            #dm-dock { display: none; }
        </style>
    </head>

    <body>

        <!-- DESIGNMODE DOCK -->
        <div id="dm-dock">
            <h4 title="Drag it">Dock</h4>
            <div>
                <fieldset id="dm-dock-actions">
                    <legend>Actions</legend>
                    <ul>
                        <li><button title="Undo"></button></li>
                        <li><button title="Redo"></button></li>
                        <li><button title="Save"></button></li>
                        <li><button title="Paste from word"></button></li>
                    </ul>
                </fieldset>
                <fieldset id="dm-dock-actions">
                    <legend>Formatting</legend>
                    <ul>
                        <li><button title="Bold"></button></li>
                        <li><button title="Italic"></button></li>
                        <li><button title="Strike"></button></li>
                        <li><button title="Clear formatting"></button></li>
                    </ul>
                </fieldset>
                <fieldset id="dm-dock-elements">
                    <legend>Elements</legend>
                    <ul>
                        <li><button title="Ordered list"></button></li>
                        <li><button title="Unordered list"></button></li>
                        <li><button title="Hyperlink"></button></li>
                        <li><button title="Image"></button></li>
                    </ul>
                </fieldset>
                <fieldset id="dm-dock-styles">
                    <legend>Styles</legend>
                    <ul>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                        <li>Style name</li>
                    </ul>
                </fieldset>
            </div>
        </div>

        <!-- /DESIGNMODE DOCK -->

        <div id="wrapper">
            <header>
                <h1><a href="/">DesignMode blog</a></h1>
            </header>
            <nav>
                <ul>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Projects</a></li>
                    <li><a href="#">Wiki</a></li>
                    <li><a href="#">About</a></li>
                </ul>
            </nav>
            <div id="body">
                <div id="article-wrapper">
                    <h4><a href="#" id="toggle-designmode"><span>Enable</span><span>Disable</span> DesignMode</a></h4>
                    <article class="content">
                        <section>
                            <h1>How about article header?</h1>

                            <p>
                               <em>Little article intro here. At sed dolor felis ante facilisi, aliquet rutrum donec ornare, nullam et malesuada ut a ac, enim scelerisque ante sed arcu, purus varius. Rutrum ac, sed at ridiculus, et nunc ut. Id morbi, suspendisse purus wisi dolor wisi lectus porttitor, ipsum in ac, pretium ante tellus duis nec viverra orci. Nibh nibh sem metus suscipit, hac tincidunt vehicula ultricies. Nulla donec et, nulla feugiat ac eu donec, wisi sed et orci pede libero. Lorem in cursus enim odio. Sed nec posuere mollis tincidunt nibh diam, magna id sem porta cursus, mi amet mauris sit arcu. Faucibus eleifend pellentesque orci arcu ut, vel egestas nulla, lorem nunc vel praesent. Ut nulla, fusce urna tristique turpis mus.</em>
                            </p>

                            <section>
                                <h2>Header number one</h2>
                                <p>Lorem ipsum dolor sit amet, sapien ut. Mollis natoque <strong>praesent faucibus</strong>, mi nisl nonummy adipiscing pharetra tincidunt neque, felis at vivamus. Lectus mauris. Tempus duis at pede semper, neque eu consectetuer vestibulum, fusce hac est ipsum nullam metus, faucibus erat viverra amet arcu, euismod quos laoreet mi sit proin luctus. Ante et pulvinar velit, dui dapibus id placerat. Nisl urna lacus donec tortor sapien, rutrum est sed ultrices placerat felis, enim sit ultricies integer et, suspendisse vel nostra molestie justo, ac vestibulum aliquet vehicula eu facilisis. Dictum diam enim justo consequat, blandit et dignissim nec bibendum sed, sit pede metus eros ipsum diam.</p>
                                <p><em>Turpis condimentum</em>, purus tellus nam ut, a felis aliquam, congue scelerisque libero aliquet. Adipiscing nec ipsum pellentesque in mauris, mi sodales ullamcorper dignissim accumsan ipsum sapien. A dignissim orci, molestie aliquet dictum massa sed in fusce, congue ultricies. <a href="/risus-hendrerit">Risus hendrerit</a> non, aliquam sed eros enim volutpat pulvinar explicabo, diam vel egestas ullamcorper sit sagittis ut. Nonummy scelerisque maecenas nulla consectetuer in eu. Fermentum vitae suscipit tellus, ut sed consectetuer, lacus in cursus. Diam vestibulum pharetra sem quisque, nibh aliquam dictum, feugiat eget non enim. Egestas eros velit sit vivamus ac. Eget dui, vitae vestibulum nisl, orci pharetra phasellus at. Torquent proin curabitur nunc consequat facilisis, sociis eget feugiat lacus, nunc elementum at aenean, porttitor sem proin, id mauris vitae eum lectus scelerisque.</p>
                            </section>

                            <section>
                                <h2>Header number two</h2>
                                <p>Aenean nec amet, suscipit <strike>libero elit</strike> vitae lectus quis molestie, aliquam leo ligula vel justo porttitor dictum, mauris odio libero lacus, rutrum gravida. Mauris et. Lorem sunt eu class dolor ullamcorper, risus tellus blandit, etiam velit nec mattis blandit sodales vel, leo id volutpat donec. Volutpat ad aenean convallis suscipit, maecenas leo dignissim venenatis erat etiam turpis, hendrerit non, proin architecto. Arcu fermentum. Imperdiet quam suscipit lorem dictumst cras, habitasse dictum in amet sollicitudin, vitae dolor purus arcu vitae, maecenas fermentum elit enim posuere orci.</p>
                                <p>At sed dolor felis ante facilisi, aliquet rutrum donec ornare, nullam et malesuada ut a ac, enim scelerisque ante sed arcu, purus varius. Rutrum ac, sed at ridiculus, et nunc ut. Id morbi, suspendisse purus wisi dolor wisi lectus porttitor, ipsum in ac, pretium ante tellus duis nec viverra orci. Nibh nibh sem metus suscipit, hac tincidunt vehicula ultricies. Nulla donec et, nulla feugiat ac eu donec, wisi sed et orci pede libero. Lorem in cursus enim odio. Sed nec posuere mollis tincidunt nibh diam, magna id sem porta cursus, mi amet mauris sit arcu. Faucibus eleifend pellentesque orci arcu ut, vel egestas nulla, lorem nunc vel praesent. Ut nulla, fusce urna tristique turpis mus, sit adipiscing urna odio quam, aliquet at vestibulum nulla pellentesque vestibulum pulvinar, ridiculus scelerisque sit dolor mi diam blandit. Non sapien et tincidunt mauris, rutrum dolor nullam nulla nulla, ut non massa vulputate pede maecenas posuere. Praesent porttitor ac nibh nascetur.</p>
                            </section>

                            <section>
                                <h2>Header number three</h2>
                                <p>Aenean nec amet, suscipit <strike>libero elit</strike> vitae lectus quis molestie, aliquam leo ligula vel justo porttitor dictum, mauris odio libero lacus, rutrum gravida. Mauris et. Lorem sunt eu class dolor ullamcorper, risus tellus blandit, etiam velit nec mattis blandit sodales vel, leo id volutpat donec. Volutpat ad aenean convallis suscipit, maecenas leo dignissim venenatis erat etiam turpis, hendrerit non, proin architecto. Arcu fermentum. Imperdiet quam suscipit lorem dictumst cras, habitasse dictum in amet sollicitudin, vitae dolor purus arcu vitae, maecenas fermentum elit enim posuere orci.</p>
                                <p>At sed dolor felis ante facilisi, aliquet rutrum donec ornare, nullam et malesuada ut a ac, enim scelerisque ante sed arcu, purus varius. Rutrum ac, sed at ridiculus, et nunc ut. Id morbi, suspendisse purus wisi dolor wisi lectus porttitor, ipsum in ac, pretium ante tellus duis nec viverra orci. Nibh nibh sem metus suscipit, hac tincidunt vehicula ultricies. Nulla donec et, nulla feugiat ac eu donec, wisi sed et orci pede libero. Lorem in cursus enim odio. Sed nec posuere mollis tincidunt nibh diam, magna id sem porta cursus, mi amet mauris sit arcu. Faucibus eleifend pellentesque orci arcu ut, vel egestas nulla, lorem nunc vel praesent. Ut nulla, fusce urna tristique turpis mus, sit adipiscing urna odio quam, aliquet at vestibulum nulla pellentesque vestibulum pulvinar, ridiculus scelerisque sit dolor mi diam blandit. Non sapien et tincidunt mauris, rutrum dolor nullam nulla nulla, ut non massa vulputate pede maecenas posuere. Praesent porttitor ac nibh nascetur.</p>
                            </section>

                            <section>
                                <h2>Header number four</h2>
                                <p>Aenean nec amet, suscipit <strike>libero elit</strike> vitae lectus quis molestie, aliquam leo ligula vel justo porttitor dictum, mauris odio libero lacus, rutrum gravida. Mauris et. Lorem sunt eu class dolor ullamcorper, risus tellus blandit, etiam velit nec mattis blandit sodales vel, leo id volutpat donec. Volutpat ad aenean convallis suscipit, maecenas leo dignissim venenatis erat etiam turpis, hendrerit non, proin architecto. Arcu fermentum. Imperdiet quam suscipit lorem dictumst cras, habitasse dictum in amet sollicitudin, vitae dolor purus arcu vitae, maecenas fermentum elit enim posuere orci.</p>
                                <p>At sed dolor felis ante facilisi, aliquet rutrum donec ornare, nullam et malesuada ut a ac, enim scelerisque ante sed arcu, purus varius. Rutrum ac, sed at ridiculus, et nunc ut. Id morbi, suspendisse purus wisi dolor wisi lectus porttitor, ipsum in ac, pretium ante tellus duis nec viverra orci. Nibh nibh sem metus suscipit, hac tincidunt vehicula ultricies. Nulla donec et, nulla feugiat ac eu donec, wisi sed et orci pede libero. Lorem in cursus enim odio. Sed nec posuere mollis tincidunt nibh diam, magna id sem porta cursus, mi amet mauris sit arcu. Faucibus eleifend pellentesque orci arcu ut, vel egestas nulla, lorem nunc vel praesent. Ut nulla, fusce urna tristique turpis mus, sit adipiscing urna odio quam, aliquet at vestibulum nulla pellentesque vestibulum pulvinar, ridiculus scelerisque sit dolor mi diam blandit. Non sapien et tincidunt mauris, rutrum dolor nullam nulla nulla, ut non massa vulputate pede maecenas posuere. Praesent porttitor ac nibh nascetur.</p>
                            </section>
                        </section>
                    </article>
                </div>
                <aside>
                    sidebar
                </aside>
            </div>
            <footer>
                <p>
                    &copy; DesignMode, WYSIWYM editor. 2011.
                </p>
            </footer>
        </div>

        <!-- DesignMode styles -->
        <link rel="stylesheet" href="css/design_mode/overlay.css" />
        <link rel="stylesheet" href="css/design_mode/iframe.css" />
        <link rel="stylesheet" href="css/design_mode/dock.css" />

        <!-- DesignMode scripts -->
        <script src="js/design_mode/design_mode.js"></script>
        <script src="js/design_mode/design_mode.overlay.js"></script>
        <script src="js/design_mode/design_mode.dock.js"></script>
        <script src="js/design_mode/design_mode.editor.js"></script>

        <script>
            // По-умолчанию Dock задизейблен. Все кроме дока и статьи скрыто при помощи overlay.
            // Если устанавливаем фокус в iframe, то Dock раздизейбливается
            // 
            // Куча разные event-колбэков
            // У ифрейма есть прокрутка, поэтому я добавил к его высоте 70px
            // +- Методы editor.enable(), editor.disable(), editor.toggle()
            //
            // Нужно подумать, как будет происходить отправка формы с аяксом и без него.
            // Что если док нужен горизонтальный? Может сделать настройку для этого?
            // Док должен сворачиваться
            // Позиционирование дока относительно элемента на странице при инициализации.
            // Если этот редактор будет встроен в форму, например в админке, где будет
            // еще куча разные кнопок и всего такого, то нужно ли:
            // 1. Сделать настройку, чтобы редактор понимал текстарию (это можно сделать автоматически без настройки).
            // 2. Сделать настройку, чтобы док можно было встраивать указанный контейнер?
            // 3. Настройки, чтобы отключать draggable и pin у дока.
            //
            // Если у статьи, которую редактируем при помощи DesignMode есть дополнительные возможности
            // настроек, типа отложенного редактирования, добавления тегов и всего такого, то куда засунуть
            // эти настройки? Во всплывающее окно? Или в док?

            document.addEvent('domready', function() {
                var container = $$('#article-wrapper article')[0];
                var toggle    = $('toggle-designmode');
                var editor    = new DesignMode(container, {

                });
                

                toggle.addEvent('click', function(e) {
                    e.stop();

                    if (toggle.hasClass('enabled')) {
                        toggle.removeClass('enabled');
                        editor.disable();
                        
                    } else {
                        toggle.addClass('enabled');
                        editor.enable();
                    }
                });





            //    var overlay = new DesignMode.Overlay;
            //    overlay.show();
            //    $('dm-dock').setStyle('z-index', 9000);
            //    $('editable-iframe').setStyles({
            //        'position' : 'relative',
            //        'z-index'  : 9000
            //    });
            })
        </script>

    </body>
</html>
